(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0f0d74"],{"9da4":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"cs-p"},[n("cs-help",{staticStyle:{"padding-bottom":"19px"},attrs:{router:t.$route.path}}),n("el-table",{attrs:{data:t.currentTableData,"highlight-current-row":!0},on:{"sort-change":t.sortChange}},[n("el-table-column",{attrs:{label:"提现单号",prop:"withdraw_no","min-width":"160",sortable:"custom"}}),n("el-table-column",{attrs:{label:"提现金额",prop:"money"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b",[t._v(t._s(t._f("getNumber")(e.row.money)))])]}}])}),n("el-table-column",{attrs:{label:"手续费(%)",prop:"fee"}}),n("el-table-column",{attrs:{label:"合计金额",prop:"amount"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("getNumber")(e.row.amount))+" ")]}}])}),n("el-table-column",{attrs:{label:"状态",prop:"status",align:"center",sortable:"custom","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tag",{attrs:{type:t.statusMap[e.row.status].type,effect:"plain",size:"mini"}},[t._v(" "+t._s(t.statusMap[e.row.status].text)+" ")])]}}])}),n("el-table-column",{attrs:{label:"创建日期",prop:"create_time",align:"center",width:"160",sortable:"custom"}}),n("el-table-column",{attrs:{label:"操作",align:"center","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"small",type:"text"},on:{click:function(n){return t.handleWithdraw(e.$index)}}},[t._v("提单详细")])]}}])})],1),n("el-dialog",{attrs:{title:"提单详细",visible:t.infoVisible,"append-to-body":!0,"close-on-click-modal":!1,width:"600px"},on:{"update:visible":function(e){t.infoVisible=e}}},[n("cs-print",{ref:"print",staticStyle:{"margin-top":"-15px"}},[t.infoVisible?[n("table",{staticStyle:{width:"100%"}},[n("caption",[n("p",{staticStyle:{"background-color":"#F8F8F9"}},[t._v("提现单据")])]),n("tr",[n("td",[n("b",[t._v("提现单号：")]),t._v(t._s(t.infoForm.withdraw_no))]),n("td",[n("b",[t._v("账号/昵称：")]),t._v(t._s(t.infoForm.get_user.username)+" / "+t._s(t.infoForm.get_user.nickname))])]),n("tr",[n("td",[t._v("创建日期："+t._s(t.infoForm.create_time))])])]),n("table",{staticStyle:{width:"100%"}},[n("colgroup",[n("col",{staticStyle:{width:"20%"}}),n("col",{staticStyle:{width:"75%"}})]),n("caption",[n("p",{staticStyle:{"background-color":"#F8F8F9"}},[t._v("收款明细")])]),n("tr",[n("td",[t._v("收款人姓名：")]),n("td",[t._v(t._s(t.infoForm.name))])]),n("tr",[n("td",[t._v("收款人手机：")]),n("td",[t._v(t._s(t.infoForm.mobile))])]),n("tr",[n("td",[t._v("收款账户：")]),n("td",[t._v(t._s(t.infoForm.bank_name))])]),n("tr",[n("td",[t._v("收款账号：")]),n("td",[t._v(t._s(t.infoForm.account))])]),n("tr"),n("tr",[n("td",[n("b",[t._v("提现金额：")])]),n("td",[t._v(t._s(t._f("getNumber")(t.infoForm.money)))])]),n("tr",[n("td",[t._v("手续费：")]),n("td",[t._v(t._s(t.infoForm.fee)+" %")])]),n("tr",[n("td",[t._v("合计金额：")]),n("td",[t._v(t._s(t._f("getNumber")(t.infoForm.amount)))])])]),n("table",{staticStyle:{width:"100%"}},[n("caption",[n("p",{staticStyle:{"background-color":"#F8F8F9"}},[t._v("其他内容")])]),n("tbody",[n("tr",[n("td",[n("span",[t._v("状态：")]),n("el-tag",{attrs:{type:t.statusMap[t.infoForm.status].type,effect:"plain",size:"mini"}},[t._v(" "+t._s(t.statusMap[t.infoForm.status].text)+" ")])],1)]),n("tr",[n("td",[t._v("备注："+t._s(t.infoForm.remark))])]),n("tr",[n("td",[n("img",{attrs:{src:t._f("getBarcodeImage")(t.infoForm.withdraw_no),alt:""}}),n("img",{staticClass:"cs-fr",attrs:{src:t._f("getQrcodeImage")(t.infoForm.withdraw_no),alt:""}})])])])])]:t._e()],2),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("div",{staticClass:"cs-fl"},[n("el-button",{attrs:{icon:"el-icon-printer",size:"small"},on:{click:function(e){return t.$refs.print.toPrint()}}},[t._v("打印")])],1),0===t.infoForm.status&&t.auth.process?n("el-button",{attrs:{size:"small"},on:{click:function(e){return t.handleStatus(1)}}},[t._v("处理提现")]):t._e(),1===t.infoForm.status&&t.auth.complete?n("el-button",{attrs:{type:"success",size:"small"},on:{click:function(e){return t.handleStatus(3)}}},[t._v("完成提现")]):t._e(),1===t.infoForm.status&&t.auth.refuse?n("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(e){return t.handleStatus(4)}}},[t._v("拒绝提现")]):t._e(),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.infoVisible=!1}}},[t._v("确定")])],1)],1)],1)},a=[],o=(n("d3b7"),n("6ee2")),s=n("ca00"),i={components:{csPrint:function(){return n.e("chunk-2d238a43").then(n.bind(null,"fff3"))}},props:{tableData:{default:function(){return[]}}},watch:{tableData:{handler:function(t){this.currentTableData=t},immediate:!0}},data:function(){return{infoForm:{},infoVisible:!1,auth:{process:!1,complete:!1,refuse:!1},currentTableData:[],statusMap:{0:{text:"待处理",type:"info"},1:{text:"处理中",type:""},2:{text:"已取消",type:"warning"},3:{text:"已完成",type:"success"},4:{text:"已拒绝",type:"danger"}}}},filters:{getNumber:function(t){return s["a"].getNumber(t)},getBarcodeImage:function(t){return s["a"].getBarcodeUrl(t)},getQrcodeImage:function(t){return s["a"].getQrcodeUrl(t)}},mounted:function(){this._validationAuth()},methods:{_validationAuth:function(){this.auth.process=this.$permission("/member/withdraw/list/process"),this.auth.complete=this.$permission("/member/withdraw/list/complete"),this.auth.refuse=this.$permission("/member/withdraw/list/refuse")},sortChange:function(t){var e=t.column,n=t.prop,r=t.order,a={order_type:void 0,order_field:void 0};e&&r&&(a.order_type="ascending"===r?"asc":"desc",a.order_field=n),this.$emit("sort",a)},handleWithdraw:function(t){this.currentIndex=t,this.infoForm=this.currentTableData[t],this.infoVisible=!0},handleStatus:function(t){var e=this,n=this.currentTableData[this.currentIndex];if(1===t&&this.$confirm("确定要执行该操作吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",closeOnClickModal:!1}).then((function(){Object(o["c"])(n.withdraw_no).then((function(){n.status=t,e.$message.success("操作成功")}))})).catch((function(){})),3===t||4===t){var r="备注",a="请填写备注信息";4===t&&(r="拒绝",a="请填写拒绝原因"),this.$prompt(a,r,{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/\S/,inputErrorMessage:a}).then((function(r){var a=r.value;3===t&&Object(o["a"])(n.withdraw_no,a).then((function(){n.status=t,n.remark=a,e.$message.success("操作成功")})),4===t&&Object(o["d"])(n.withdraw_no,a).then((function(){n.status=t,n.remark=a,e.$message.success("操作成功")}))})).catch((function(){}))}}}},l=i,c=n("2877"),u=Object(c["a"])(l,r,a,!1,null,null,null);e["default"]=u.exports}}]);